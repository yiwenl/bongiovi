!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.bongiovi=t()}}(function(){var t;return function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e){"use strict";var i=t("./bongiovi/GLTools"),n={GL:i,GLTools:i,Scheduler:t("./bongiovi/Scheduler"),EaseNumber:t("./bongiovi/EaseNumber"),QuatRotation:t("./bongiovi/QuatRotation"),Scene:t("./bongiovi/Scene"),Camera:t("./bongiovi/Camera"),SimpleCamera:t("./bongiovi/SimpleCamera"),CameraPerspective:t("./bongiovi/CameraPerspective"),glm:t("gl-matrix")};e.exports=n},{"./bongiovi/Camera":3,"./bongiovi/CameraPerspective":4,"./bongiovi/EaseNumber":5,"./bongiovi/GLTools":6,"./bongiovi/QuatRotation":7,"./bongiovi/Scene":8,"./bongiovi/Scheduler":9,"./bongiovi/SimpleCamera":10,"gl-matrix":2}],2:[function(e,i,n){!function(r){"use strict";var a={};"undefined"==typeof n?"function"==typeof t&&"object"==typeof t.amd&&t.amd?(a.exports={},t(function(){return a.exports})):a.exports="undefined"!=typeof window?window:r:a.exports=n,function(n){if(!r)var r=1e-6;if(!a)var a="undefined"!=typeof Float32Array?Float32Array:Array;if(!s)var s=Math.random;var o={};o.setMatrixArrayType=function(t){a=t},"undefined"!=typeof n&&(n.glMatrix=o);var u=Math.PI/180;o.toRadian=function(t){return t*u};var h={};h.create=function(){var t=new a(2);return t[0]=0,t[1]=0,t},h.clone=function(t){var e=new a(2);return e[0]=t[0],e[1]=t[1],e},h.fromValues=function(t,e){var i=new a(2);return i[0]=t,i[1]=e,i},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},h.set=function(t,e,i){return t[0]=e,t[1]=i,t},h.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},h.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},h.sub=h.subtract,h.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},h.mul=h.multiply,h.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},h.div=h.divide,h.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},h.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},h.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},h.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},h.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},h.dist=h.distance,h.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n},h.sqrDist=h.squaredDistance,h.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},h.len=h.length,h.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},h.sqrLen=h.squaredLength,h.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},h.normalize=function(t,e){var i=e[0],n=e[1],r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},h.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},h.cross=function(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t},h.lerp=function(t,e,i,n){var r=e[0],a=e[1];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t},h.random=function(t,e){e=e||1;var i=2*s()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},h.transformMat2=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t},h.transformMat2d=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},h.transformMat3=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t},h.transformMat4=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t},h.forEach=function(){var t=h.create();return function(e,i,n,r,a,s){var o,u;for(i||(i=2),n||(n=0),u=r?Math.min(r*i+n,e.length):e.length,o=n;u>o;o+=i)t[0]=e[o],t[1]=e[o+1],a(t,t,s),e[o]=t[0],e[o+1]=t[1];return e}}(),h.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof n&&(n.vec2=h);var c={};c.create=function(){var t=new a(3);return t[0]=0,t[1]=0,t[2]=0,t},c.clone=function(t){var e=new a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},c.fromValues=function(t,e,i){var n=new a(3);return n[0]=t,n[1]=e,n[2]=i,n},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},c.set=function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t},c.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},c.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},c.sub=c.subtract,c.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},c.mul=c.multiply,c.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},c.div=c.divide,c.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},c.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},c.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},c.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t},c.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+n*n+r*r)},c.dist=c.distance,c.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r},c.sqrDist=c.squaredDistance,c.length=function(t){var e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)},c.len=c.length,c.squaredLength=function(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n},c.sqrLen=c.squaredLength,c.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},c.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t},c.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},c.cross=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],u=i[2];return t[0]=r*u-a*o,t[1]=a*s-n*u,t[2]=n*o-r*s,t},c.lerp=function(t,e,i,n){var r=e[0],a=e[1],s=e[2];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t[2]=s+n*(i[2]-s),t},c.random=function(t,e){e=e||1;var i=2*s()*Math.PI,n=2*s()-1,r=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*e,t},c.transformMat4=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12],t[1]=i[1]*n+i[5]*r+i[9]*a+i[13],t[2]=i[2]*n+i[6]*r+i[10]*a+i[14],t},c.transformMat3=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=n*i[0]+r*i[3]+a*i[6],t[1]=n*i[1]+r*i[4]+a*i[7],t[2]=n*i[2]+r*i[5]+a*i[8],t},c.transformQuat=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],u=i[2],h=i[3],c=h*n+o*a-u*r,f=h*r+u*n-s*a,l=h*a+s*r-o*n,d=-s*n-o*r-u*a;return t[0]=c*h+d*-s+f*-u-l*-o,t[1]=f*h+d*-o+l*-s-c*-u,t[2]=l*h+d*-u+c*-o-f*-s,t},c.rotateX=function(t,e,i,n){var r=[],a=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],a[0]=r[0],a[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),a[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t},c.rotateY=function(t,e,i,n){var r=[],a=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],a[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),a[1]=r[1],a[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t},c.rotateZ=function(t,e,i,n){var r=[],a=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],a[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),a[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),a[2]=r[2],t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t},c.forEach=function(){var t=c.create();return function(e,i,n,r,a,s){var o,u;for(i||(i=3),n||(n=0),u=r?Math.min(r*i+n,e.length):e.length,o=n;u>o;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),c.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof n&&(n.vec3=c);var f={};f.create=function(){var t=new a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},f.clone=function(t){var e=new a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},f.fromValues=function(t,e,i,n){var r=new a(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r},f.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},f.set=function(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t},f.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},f.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},f.sub=f.subtract,f.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},f.mul=f.multiply,f.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},f.div=f.divide,f.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},f.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},f.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},f.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},f.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(i*i+n*n+r*r+a*a)},f.dist=f.distance,f.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return i*i+n*n+r*r+a*a},f.sqrDist=f.squaredDistance,f.length=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+i*i+n*n+r*r)},f.len=f.length,f.squaredLength=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r},f.sqrLen=f.squaredLength,f.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},f.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*i+n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s),t},f.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},f.lerp=function(t,e,i,n){var r=e[0],a=e[1],s=e[2],o=e[3];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t[2]=s+n*(i[2]-s),t[3]=o+n*(i[3]-o),t},f.random=function(t,e){return e=e||1,t[0]=s(),t[1]=s(),t[2]=s(),t[3]=s(),f.normalize(t,t),f.scale(t,t,e),t},f.transformMat4=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s,t},f.transformQuat=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],u=i[2],h=i[3],c=h*n+o*a-u*r,f=h*r+u*n-s*a,l=h*a+s*r-o*n,d=-s*n-o*r-u*a;return t[0]=c*h+d*-s+f*-u-l*-o,t[1]=f*h+d*-o+l*-s-c*-u,t[2]=l*h+d*-u+c*-o-f*-s,t},f.forEach=function(){var t=f.create();return function(e,i,n,r,a,s){var o,u;for(i||(i=4),n||(n=0),u=r?Math.min(r*i+n,e.length):e.length,o=n;u>o;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),f.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof n&&(n.vec4=f);var l={};l.create=function(){var t=new a(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},l.clone=function(t){var e=new a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},l.transpose=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},l.invert=function(r,a){var s=a[0],o=a[1],u=a[2],h=a[3],c=s*h-u*o;return c?(c=1/c,r[0]=h*c,r[1]=-o*c,r[2]=-u*c,r[3]=s*c,r):function(e){if("object"==typeof n&&"undefined"!=typeof i)i.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.bongiovi=e()}}(function(){var t;return function i(t,n,r){function a(o,u){if(!n[o]){if(!t[o]){var h="function"==typeof e&&e;if(!u&&h)return h(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var i=t[o][1][e];return a(i?i:e)},f,f.exports,i,t,n,r)}return n[o].exports}for(var s="function"==typeof e&&e,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e){var i=t("./bongiovi/GLTools"),n={GL:i,GLTools:i,Scheduler:t("./bongiovi/Scheduler"),EaseNumber:t("./bongiovi/EaseNumber"),QuatRotation:t("./bongiovi/QuatRotation"),Scene:t("./bongiovi/Scene"),Camera:t("./bongiovi/Camera"),SimpleCamera:t("./bongiovi/SimpleCamera"),CameraPerspective:t("./bongiovi/CameraPerspective"),glm:t("gl-matrix")};e.exports=n},{"./bongiovi/Camera":3,"./bongiovi/CameraPerspective":4,"./bongiovi/EaseNumber":5,"./bongiovi/GLTools":6,"./bongiovi/QuatRotation":7,"./bongiovi/Scene":8,"./bongiovi/Scheduler":9,"./bongiovi/SimpleCamera":10,"gl-matrix":2}],2:[function(e,i,n){!function(e){var i={};"undefined"==typeof n?"function"==typeof t&&"object"==typeof t.amd&&t.amd?(i.exports={},t(function(){return i.exports})):i.exports="undefined"!=typeof window?window:e:i.exports=n,function(t){if(!e)var e=1e-6;if(!i)var i="undefined"!=typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var r={};r.setMatrixArrayType=function(t){i=t},"undefined"!=typeof t&&(t.glMatrix=r);var a=Math.PI/180;r.toRadian=function(t){return t*a};var s={};s.create=function(){var t=new i(2);return t[0]=0,t[1]=0,t},s.clone=function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},s.fromValues=function(t,e){var n=new i(2);return n[0]=t,n[1]=e,n},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},s.set=function(t,e,i){return t[0]=e,t[1]=i,t},s.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},s.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},s.sub=s.subtract,s.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},s.mul=s.multiply,s.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},s.div=s.divide,s.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},s.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},s.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},s.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},s.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},s.dist=s.distance,s.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n},s.sqrDist=s.squaredDistance,s.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},s.len=s.length,s.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},s.sqrLen=s.squaredLength,s.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},s.normalize=function(t,e){var i=e[0],n=e[1],r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},s.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},s.cross=function(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t},s.lerp=function(t,e,i,n){var r=e[0],a=e[1];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t},s.random=function(t,e){e=e||1;var i=2*n()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},s.transformMat2=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t},s.transformMat2d=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},s.transformMat3=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t},s.transformMat4=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t},s.forEach=function(){var t=s.create();return function(e,i,n,r,a,s){var o,u;for(i||(i=2),n||(n=0),u=r?Math.min(r*i+n,e.length):e.length,o=n;u>o;o+=i)t[0]=e[o],t[1]=e[o+1],a(t,t,s),e[o]=t[0],e[o+1]=t[1];return e}}(),s.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=s);var o={};o.create=function(){var t=new i(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new i(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,n){var r=new i(3);return r[0]=t,r[1]=e,r[2]=n,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},o.div=o.divide,o.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},o.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},o.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t},o.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],u=i[2];return t[0]=r*u-a*o,t[1]=a*s-n*u,t[2]=n*o-r*s,t},o.lerp=function(t,e,i,n){var r=e[0],a=e[1],s=e[2];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t[2]=s+n*(i[2]-s),t},o.random=function(t,e){e=e||1;var i=2*n()*Math.PI,r=2*n()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*a,t[1]=Math.sin(i)*a,t[2]=r*e,t},o.transformMat4=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12],t[1]=i[1]*n+i[5]*r+i[9]*a+i[13],t[2]=i[2]*n+i[6]*r+i[10]*a+i[14],t},o.transformMat3=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=n*i[0]+r*i[3]+a*i[6],t[1]=n*i[1]+r*i[4]+a*i[7],t[2]=n*i[2]+r*i[5]+a*i[8],t},o.transformQuat=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],u=i[2],h=i[3],c=h*n+o*a-u*r,f=h*r+u*n-s*a,l=h*a+s*r-o*n,d=-s*n-o*r-u*a;return t[0]=c*h+d*-s+f*-u-l*-o,t[1]=f*h+d*-o+l*-s-c*-u,t[2]=l*h+d*-u+c*-o-f*-s,t},o.rotateX=function(t,e,i,n){var r=[],a=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],a[0]=r[0],a[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),a[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t},o.rotateY=function(t,e,i,n){var r=[],a=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],a[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),a[1]=r[1],a[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t},o.rotateZ=function(t,e,i,n){var r=[],a=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],a[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),a[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),a[2]=r[2],t[0]=a[0]+i[0],t[1]=a[1]+i[1],t[2]=a[2]+i[2],t},o.forEach=function(){var t=o.create();return function(e,i,n,r,a,s){var o,u;for(i||(i=3),n||(n=0),u=r?Math.min(r*i+n,e.length):e.length,o=n;u>o;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=o);var u={};u.create=function(){var t=new i(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},u.clone=function(t){var e=new i(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.fromValues=function(t,e,n,r){var a=new i(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.set=function(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t},u.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},u.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},u.sub=u.subtract,u.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},u.mul=u.multiply,u.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},u.div=u.divide,u.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},u.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},u.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},u.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},u.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(i*i+n*n+r*r+a*a)},u.dist=u.distance,u.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return i*i+n*n+r*r+a*a},u.sqrDist=u.squaredDistance,u.length=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+i*i+n*n+r*r)},u.len=u.length,u.squaredLength=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r},u.sqrLen=u.squaredLength,u.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},u.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*i+n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s),t},u.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},u.lerp=function(t,e,i,n){var r=e[0],a=e[1],s=e[2],o=e[3];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t[2]=s+n*(i[2]-s),t[3]=o+n*(i[3]-o),t},u.random=function(t,e){return e=e||1,t[0]=n(),t[1]=n(),t[2]=n(),t[3]=n(),u.normalize(t,t),u.scale(t,t,e),t},u.transformMat4=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s,t},u.transformQuat=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],u=i[2],h=i[3],c=h*n+o*a-u*r,f=h*r+u*n-s*a,l=h*a+s*r-o*n,d=-s*n-o*r-u*a;return t[0]=c*h+d*-s+f*-u-l*-o,t[1]=f*h+d*-o+l*-s-c*-u,t[2]=l*h+d*-u+c*-o-f*-s,t},u.forEach=function(){var t=u.create();return function(e,i,n,r,a,s){var o,u;for(i||(i=4),n||(n=0),u=r?Math.min(r*i+n,e.length):e.length,o=n;u>o;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),u.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=u);var h={};h.create=function(){var t=new i(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},h.clone=function(t){var e=new i(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},h.transpose=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},h.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*a-r*n;return s?(s=1/s,t[0]=a*s,t[1]=-n*s,t[2]=-r*s,t[3]=i*s,t):null},h.adjoint=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},h.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},h.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=i[0],u=i[1],h=i[2],c=i[3];return t[0]=n*o+a*u,t[1]=r*o+s*u,t[2]=n*h+a*c,t[3]=r*h+s*c,t},h.mul=h.multiply,h.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u+a*o,t[1]=r*u+s*o,t[2]=n*-o+a*u,t[3]=r*-o+s*u,t},h.scale=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=i[0],u=i[1];return t[0]=n*o,t[1]=r*o,t[2]=a*u,t[3]=s*u,t},h.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},h.LDU=function(t,e,i,n){return t[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-t[2]*i[1],[t,e,i]},"undefined"!=typeof t&&(t.mat2=h);var c={};c.create=function(){var t=new i(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.clone=function(t){var e=new i(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=i*a-n*r;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-r*u,t[3]=i*u,t[4]=(r*o-a*s)*u,t[5]=(n*s-i*o)*u,t):null},c.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},c.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=i[0],c=i[1],f=i[2],l=i[3],d=i[4],_=i[5];return t[0]=n*h+a*c,t[1]=r*h+s*c,t[2]=n*f+a*l,t[3]=r*f+s*l,t[4]=n*d+a*_+o,t[5]=r*d+s*_+u,t},c.mul=c.multiply,c.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=Math.sin(i),c=Math.cos(i);return t[0]=n*c+a*h,t[1]=r*c+s*h,t[2]=n*-h+a*c,t[3]=r*-h+s*c,t[4]=o,t[5]=u,t},c.scale=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=i[0],c=i[1];return t[0]=n*h,t[1]=r*h,t[2]=a*c,t[3]=s*c,t[4]=o,t[5]=u,t},c.translate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=i[0],c=i[1];return t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=n*h+a*c+o,t[5]=r*h+s*c+u,t},c.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=c);var f={};f.create=function(){var t=new i(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},f.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},f.clone=function(t){var e=new i(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},f.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},f.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},f.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=c*s-o*h,l=-c*a+o*u,d=h*a-s*u,_=i*f+n*l+r*d;return _?(_=1/_,t[0]=f*_,t[1]=(-c*n+r*h)*_,t[2]=(o*n-r*s)*_,t[3]=l*_,t[4]=(c*i-r*u)*_,t[5]=(-o*i+r*a)*_,t[6]=d*_,t[7]=(-h*i+n*u)*_,t[8]=(s*i-n*a)*_,t):null},f.adjoint=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8];return t[0]=s*c-o*h,t[1]=r*h-n*c,t[2]=n*o-r*s,t[3]=o*u-a*c,t[4]=i*c-r*u,t[5]=r*a-i*o,t[6]=a*h-s*u,t[7]=n*u-i*h,t[8]=i*s-n*a,t},f.determinant=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],h=t[8];return e*(h*a-s*u)+i*(-h*r+s*o)+n*(u*r-a*o)},f.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=i[0],d=i[1],_=i[2],v=i[3],m=i[4],p=i[5],g=i[6],M=i[7],w=i[8];return t[0]=l*n+d*s+_*h,t[1]=l*r+d*o+_*c,t[2]=l*a+d*u+_*f,t[3]=v*n+m*s+p*h,t[4]=v*r+m*o+p*c,t[5]=v*a+m*u+p*f,t[6]=g*n+M*s+w*h,t[7]=g*r+M*o+w*c,t[8]=g*a+M*u+w*f,t},f.mul=f.multiply,f.translate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=i[0],d=i[1];return t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=l*n+d*s+h,t[7]=l*r+d*o+c,t[8]=l*a+d*u+f,t},f.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=Math.sin(i),d=Math.cos(i);return t[0]=d*n+l*s,t[1]=d*r+l*o,t[2]=d*a+l*u,t[3]=d*s-l*n,t[4]=d*o-l*r,t[5]=d*u-l*a,t[6]=h,t[7]=c,t[8]=f,t},f.scale=function(t,e,i){var n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},f.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},f.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,u=r+r,h=i*s,c=n*s,f=n*o,l=r*s,d=r*o,_=r*u,v=a*s,m=a*o,p=a*u;return t[0]=1-f-_,t[3]=c-p,t[6]=l+m,t[1]=c+p,t[4]=1-h-_,t[7]=d-v,t[2]=l-m,t[5]=d+v,t[8]=1-h-f,t},f.normalFromMat4=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],_=e[12],v=e[13],m=e[14],p=e[15],g=i*o-n*s,M=i*u-r*s,w=i*h-a*s,x=n*u-r*o,y=n*h-a*o,b=r*h-a*u,T=c*v-f*_,L=c*m-l*_,R=c*p-d*_,A=f*m-l*v,q=f*p-d*v,E=l*p-d*m,k=g*E-M*q+w*A+x*R-y*L+b*T;return k?(k=1/k,t[0]=(o*E-u*q+h*A)*k,t[1]=(u*R-s*E-h*L)*k,t[2]=(s*q-o*R+h*T)*k,t[3]=(r*q-n*E-a*A)*k,t[4]=(i*E-r*R+a*L)*k,t[5]=(n*R-i*q-a*T)*k,t[6]=(v*b-m*y+p*x)*k,t[7]=(m*w-_*b-p*M)*k,t[8]=(_*y-v*w+p*g)*k,t):null},f.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=f);var l={};l.create=function(){var t=new i(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.clone=function(t){var e=new i(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=r,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},l.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],_=e[12],v=e[13],m=e[14],p=e[15],g=i*o-n*s,M=i*u-r*s,w=i*h-a*s,x=n*u-r*o,y=n*h-a*o,b=r*h-a*u,T=c*v-f*_,L=c*m-l*_,R=c*p-d*_,A=f*m-l*v,q=f*p-d*v,E=l*p-d*m,k=g*E-M*q+w*A+x*R-y*L+b*T;return k?(k=1/k,t[0]=(o*E-u*q+h*A)*k,t[1]=(r*q-n*E-a*A)*k,t[2]=(v*b-m*y+p*x)*k,t[3]=(l*y-f*b-d*x)*k,t[4]=(u*R-s*E-h*L)*k,t[5]=(i*E-r*R+a*L)*k,t[6]=(m*w-_*b-p*M)*k,t[7]=(c*b-l*w+d*M)*k,t[8]=(s*q-o*R+h*T)*k,t[9]=(n*R-i*q-a*T)*k,t[10]=(_*y-v*w+p*g)*k,t[11]=(f*w-c*y-d*g)*k,t[12]=(o*L-s*A-u*T)*k,t[13]=(i*A-n*L+r*T)*k,t[14]=(v*M-_*x-m*g)*k,t[15]=(c*x-f*M+l*g)*k,t):null},l.adjoint=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],_=e[12],v=e[13],m=e[14],p=e[15];return t[0]=o*(l*p-d*m)-f*(u*p-h*m)+v*(u*d-h*l),t[1]=-(n*(l*p-d*m)-f*(r*p-a*m)+v*(r*d-a*l)),t[2]=n*(u*p-h*m)-o*(r*p-a*m)+v*(r*h-a*u),t[3]=-(n*(u*d-h*l)-o*(r*d-a*l)+f*(r*h-a*u)),t[4]=-(s*(l*p-d*m)-c*(u*p-h*m)+_*(u*d-h*l)),t[5]=i*(l*p-d*m)-c*(r*p-a*m)+_*(r*d-a*l),t[6]=-(i*(u*p-h*m)-s*(r*p-a*m)+_*(r*h-a*u)),t[7]=i*(u*d-h*l)-s*(r*d-a*l)+c*(r*h-a*u),t[8]=s*(f*p-d*v)-c*(o*p-h*v)+_*(o*d-h*f),t[9]=-(i*(f*p-d*v)-c*(n*p-a*v)+_*(n*d-a*f)),t[10]=i*(o*p-h*v)-s*(n*p-a*v)+_*(n*h-a*o),t[11]=-(i*(o*d-h*f)-s*(n*d-a*f)+c*(n*h-a*o)),t[12]=-(s*(f*m-l*v)-c*(o*m-u*v)+_*(o*l-u*f)),t[13]=i*(f*m-l*v)-c*(n*m-r*v)+_*(n*l-r*f),t[14]=-(i*(o*m-u*v)-s*(n*m-r*v)+_*(n*u-r*o)),t[15]=i*(o*l-u*f)-s*(n*l-r*f)+c*(n*u-r*o),t},l.determinant=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],h=t[8],c=t[9],f=t[10],l=t[11],d=t[12],_=t[13],v=t[14],m=t[15],p=e*s-i*a,g=e*o-n*a,M=e*u-r*a,w=i*o-n*s,x=i*u-r*s,y=n*u-r*o,b=h*_-c*d,T=h*v-f*d,L=h*m-l*d,R=c*v-f*_,A=c*m-l*_,q=f*m-l*v;
return p*q-g*A+M*R+w*L-x*T+y*b},l.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],d=e[10],_=e[11],v=e[12],m=e[13],p=e[14],g=e[15],M=i[0],w=i[1],x=i[2],y=i[3];return t[0]=M*n+w*o+x*f+y*v,t[1]=M*r+w*u+x*l+y*m,t[2]=M*a+w*h+x*d+y*p,t[3]=M*s+w*c+x*_+y*g,M=i[4],w=i[5],x=i[6],y=i[7],t[4]=M*n+w*o+x*f+y*v,t[5]=M*r+w*u+x*l+y*m,t[6]=M*a+w*h+x*d+y*p,t[7]=M*s+w*c+x*_+y*g,M=i[8],w=i[9],x=i[10],y=i[11],t[8]=M*n+w*o+x*f+y*v,t[9]=M*r+w*u+x*l+y*m,t[10]=M*a+w*h+x*d+y*p,t[11]=M*s+w*c+x*_+y*g,M=i[12],w=i[13],x=i[14],y=i[15],t[12]=M*n+w*o+x*f+y*v,t[13]=M*r+w*u+x*l+y*m,t[14]=M*a+w*h+x*d+y*p,t[15]=M*s+w*c+x*_+y*g,t},l.mul=l.multiply,l.translate=function(t,e,i){var n,r,a,s,o,u,h,c,f,l,d,_,v=i[0],m=i[1],p=i[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*p+e[12],t[13]=e[1]*v+e[5]*m+e[9]*p+e[13],t[14]=e[2]*v+e[6]*m+e[10]*p+e[14],t[15]=e[3]*v+e[7]*m+e[11]*p+e[15]):(n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],d=e[10],_=e[11],t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=h,t[7]=c,t[8]=f,t[9]=l,t[10]=d,t[11]=_,t[12]=n*v+o*m+f*p+e[12],t[13]=r*v+u*m+l*p+e[13],t[14]=a*v+h*m+d*p+e[14],t[15]=s*v+c*m+_*p+e[15]),t},l.scale=function(t,e,i){var n=i[0],r=i[1],a=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.rotate=function(t,i,n,r){var a,s,o,u,h,c,f,l,d,_,v,m,p,g,M,w,x,y,b,T,L,R,A,q,E=r[0],k=r[1],D=r[2],F=Math.sqrt(E*E+k*k+D*D);return Math.abs(F)<e?null:(F=1/F,E*=F,k*=F,D*=F,a=Math.sin(n),s=Math.cos(n),o=1-s,u=i[0],h=i[1],c=i[2],f=i[3],l=i[4],d=i[5],_=i[6],v=i[7],m=i[8],p=i[9],g=i[10],M=i[11],w=E*E*o+s,x=k*E*o+D*a,y=D*E*o-k*a,b=E*k*o-D*a,T=k*k*o+s,L=D*k*o+E*a,R=E*D*o+k*a,A=k*D*o-E*a,q=D*D*o+s,t[0]=u*w+l*x+m*y,t[1]=h*w+d*x+p*y,t[2]=c*w+_*x+g*y,t[3]=f*w+v*x+M*y,t[4]=u*b+l*T+m*L,t[5]=h*b+d*T+p*L,t[6]=c*b+_*T+g*L,t[7]=f*b+v*T+M*L,t[8]=u*R+l*A+m*q,t[9]=h*R+d*A+p*q,t[10]=c*R+_*A+g*q,t[11]=f*R+v*A+M*q,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},l.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[4],s=e[5],o=e[6],u=e[7],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+h*n,t[5]=s*r+c*n,t[6]=o*r+f*n,t[7]=u*r+l*n,t[8]=h*r-a*n,t[9]=c*r-s*n,t[10]=f*r-o*n,t[11]=l*r-u*n,t},l.rotateY=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],u=e[3],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r-h*n,t[1]=s*r-c*n,t[2]=o*r-f*n,t[3]=u*r-l*n,t[8]=a*n+h*r,t[9]=s*n+c*r,t[10]=o*n+f*r,t[11]=u*n+l*r,t},l.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],u=e[3],h=e[4],c=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+h*n,t[1]=s*r+c*n,t[2]=o*r+f*n,t[3]=u*r+l*n,t[4]=h*r-a*n,t[5]=c*r-s*n,t[6]=f*r-o*n,t[7]=l*r-u*n,t},l.fromRotationTranslation=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,u=r+r,h=a+a,c=n*o,f=n*u,l=n*h,d=r*u,_=r*h,v=a*h,m=s*o,p=s*u,g=s*h;return t[0]=1-(d+v),t[1]=f+g,t[2]=l-p,t[3]=0,t[4]=f-g,t[5]=1-(c+v),t[6]=_+m,t[7]=0,t[8]=l+p,t[9]=_-m,t[10]=1-(c+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},l.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,u=r+r,h=i*s,c=n*s,f=n*o,l=r*s,d=r*o,_=r*u,v=a*s,m=a*o,p=a*u;return t[0]=1-f-_,t[1]=c+p,t[2]=l-m,t[3]=0,t[4]=c-p,t[5]=1-h-_,t[6]=d+v,t[7]=0,t[8]=l+m,t[9]=d-v,t[10]=1-h-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.frustum=function(t,e,i,n,r,a,s){var o=1/(i-e),u=1/(r-n),h=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(r+n)*u,t[10]=(s+a)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*h,t[15]=0,t},l.perspective=function(t,e,i,n,r){var a=1/Math.tan(e/2),s=1/(n-r);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*s,t[15]=0,t},l.ortho=function(t,e,i,n,r,a,s){var o=1/(e-i),u=1/(n-r),h=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*u,t[14]=(s+a)*h,t[15]=1,t},l.lookAt=function(t,i,n,r){var a,s,o,u,h,c,f,d,_,v,m=i[0],p=i[1],g=i[2],M=r[0],w=r[1],x=r[2],y=n[0],b=n[1],T=n[2];return Math.abs(m-y)<e&&Math.abs(p-b)<e&&Math.abs(g-T)<e?l.identity(t):(f=m-y,d=p-b,_=g-T,v=1/Math.sqrt(f*f+d*d+_*_),f*=v,d*=v,_*=v,a=w*_-x*d,s=x*f-M*_,o=M*d-w*f,v=Math.sqrt(a*a+s*s+o*o),v?(v=1/v,a*=v,s*=v,o*=v):(a=0,s=0,o=0),u=d*o-_*s,h=_*a-f*o,c=f*s-d*a,v=Math.sqrt(u*u+h*h+c*c),v?(v=1/v,u*=v,h*=v,c*=v):(u=0,h=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=s,t[5]=h,t[6]=d,t[7]=0,t[8]=o,t[9]=c,t[10]=_,t[11]=0,t[12]=-(a*m+s*p+o*g),t[13]=-(u*m+h*p+c*g),t[14]=-(f*m+d*p+_*g),t[15]=1,t)},l.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=l);var d={};d.create=function(){var t=new i(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},d.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),i=o.fromValues(0,1,0);return function(n,r,a){var s=o.dot(r,a);return-.999999>s?(o.cross(t,e,r),o.length(t)<1e-6&&o.cross(t,i,r),o.normalize(t,t),d.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,r,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,d.normalize(n,n))}}(),d.setAxes=function(){var t=f.create();return function(e,i,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],d.normalize(e,d.fromMat3(e,t))}}(),d.clone=u.clone,d.fromValues=u.fromValues,d.copy=u.copy,d.set=u.set,d.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},d.setAxisAngle=function(t,e,i){i=.5*i;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t},d.add=u.add,d.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=i[0],u=i[1],h=i[2],c=i[3];return t[0]=n*c+s*o+r*h-a*u,t[1]=r*c+s*u+a*o-n*h,t[2]=a*c+s*h+n*u-r*o,t[3]=s*c-n*o-r*u-a*h,t},d.mul=d.multiply,d.scale=u.scale,d.rotateX=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u+s*o,t[1]=r*u+a*o,t[2]=a*u-r*o,t[3]=s*u-n*o,t},d.rotateY=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u-a*o,t[1]=r*u+s*o,t[2]=a*u+n*o,t[3]=s*u-r*o,t},d.rotateZ=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u+r*o,t[1]=r*u-n*o,t[2]=a*u+s*o,t[3]=s*u-a*o,t},d.calculateW=function(t,e){var i=e[0],n=e[1],r=e[2];return t[0]=i,t[1]=n,t[2]=r,t[3]=-Math.sqrt(Math.abs(1-i*i-n*n-r*r)),t},d.dot=u.dot,d.lerp=u.lerp,d.slerp=function(t,e,i,n){var r,a,s,o,u,h=e[0],c=e[1],f=e[2],l=e[3],d=i[0],_=i[1],v=i[2],m=i[3];return a=h*d+c*_+f*v+l*m,0>a&&(a=-a,d=-d,_=-_,v=-v,m=-m),1-a>1e-6?(r=Math.acos(a),s=Math.sin(r),o=Math.sin((1-n)*r)/s,u=Math.sin(n*r)/s):(o=1-n,u=n),t[0]=o*h+u*d,t[1]=o*c+u*_,t[2]=o*f+u*v,t[3]=o*l+u*m,t},d.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*i+n*n+r*r+a*a,o=s?1/s:0;return t[0]=-i*o,t[1]=-n*o,t[2]=-r*o,t[3]=a*o,t},d.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},d.length=u.length,d.len=d.length,d.squaredLength=u.squaredLength,d.sqrLen=d.squaredLength,d.normalize=u.normalize,d.fromMat3=function(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[7]-e[5])*i,t[1]=(e[2]-e[6])*i,t[2]=(e[3]-e[1])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var a=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*a+a]-e[3*s+s]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*s+a]-e[3*a+s])*i,t[a]=(e[3*a+r]+e[3*r+a])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t},d.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=d)}(i.exports)}(this)},{}],3:[function(t,e){var i=t("gl-matrix"),n=function(){this.matrix=i.mat4.create(),i.mat4.identity(this.matrix),this.position=i.vec3.create()},r=n.prototype;r.lookAt=function(t,e,n){i.vec3.copy(this.position,t),i.mat4.identity(this.matrix),i.mat4.lookAt(this.matrix,t,e,n)},r.getMatrix=function(){return this.matrix},e.exports=n},{"gl-matrix":2}],4:[function(t,e){var i=t("./Camera"),n=t("gl-matrix"),r=function(){i.call(this),this.projection=n.mat4.create(),this.mtxFinal=n.mat4.create()},a=r.prototype=new i;a.setPerspective=function(t,e,i,r){this._fov=t,this._near=i,this._far=r,this._aspect=e,n.mat4.perspective(this.projection,t,e,i,r)},a.getMatrix=function(){return this.matrix},a.resize=function(t){this._aspect=t,n.mat4.perspective(this.projection,this._fov,t,this._near,this._far)},a.__defineGetter__("near",function(){return this._near}),a.__defineGetter__("far",function(){return this._far}),e.exports=r},{"./Camera":3,"gl-matrix":2}],5:[function(t,e){function i(t,e){this._easing=e||.1,this._value=t,this._targetValue=t,n.addEF(this,this._update)}var n=t("./Scheduler"),r=i.prototype;r._update=function(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this._easing},r.setTo=function(t){this._targetValue=this._value=t},r.add=function(t){this._targetValue+=t},r.limit=function(t,e){this._min=t,this._max=e,this._checkLimit()},r._checkLimit=function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)},r.__defineGetter__("value",function(){return this._value}),r.__defineGetter__("targetValue",function(){return this._targetValue}),r.__defineSetter__("value",function(t){this._targetValue=t}),e.exports=i},{"./Scheduler":9}],6:[function(t,e){function i(){this.aspectRatio=1,this.fieldOfView=45,this.zNear=5,this.zFar=3e3,this.canvas=null,this.gl=null,this.shader=null,this.shaderProgram=null}var n=t("gl-matrix"),r=i.prototype;r.init=function(t,e,i,r){this.canvas=t||document.createElement("canvas");var a=r||{};a.antialias=!0,this.gl=this.canvas.getContext("experimental-webgl",a),console.log("INIT GL TOOLS : ",this.gl),void 0!==e&&void 0!==i?this.setSize(e,i):this.setSize(window.innerWidth,window.innerHeight),this.gl.viewport(0,0,this.gl.viewportWidth,this.gl.viewportHeight),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),this.matrix=n.mat4.create(),n.mat4.identity(this.matrix),this.normalMatrix=n.mat3.create(),this.depthTextureExt=this.gl.getExtension("WEBKIT_WEBGL_depth_texture"),this.floatTextureExt=this.gl.getExtension("OES_texture_float"),this.floatTextureLinearExt=this.gl.getExtension("OES_texture_float_linear")},r.getGL=function(){return this.gl},r.setShader=function(t){this.shader=t},r.setShaderProgram=function(t){this.shaderProgram=t},r.setViewport=function(t,e,i,n){this.gl.viewport(t,e,i,n)},r.setMatrices=function(t){this.camera=t},r.rotate=function(t){n.mat4.copy(this.matrix,t),n.mat4.multiply(this.matrix,this.camera.getMatrix(),this.matrix),n.mat3.fromMat4(this.normalMatrix,this.matrix),n.mat3.invert(this.normalMatrix,this.normalMatrix),n.mat3.transpose(this.normalMatrix,this.normalMatrix)},r.enableAlphaBlending=function(){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)},r.enableAdditiveBlending=function(){this.gl.blendFunc(this.gl.ONE,this.gl.ONE)},r.clear=function(t,e,i,n){this.gl.clearColor(t,e,i,n),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},r.draw=function(t){function e(t,e,i){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[i]&&(e.cacheAttribLoc[i]=t.getAttribLocation(e,i)),e.cacheAttribLoc[i]}if(!this.shaderProgram)return void console.warn("Shader program not ready yet");this.gl.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.camera.projection||this.camera.getMatrix()),this.gl.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.matrix),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vBufferPos);var i=e(this.gl,this.shaderProgram,"aVertexPosition");this.gl.vertexAttribPointer(i,t.vBufferPos.itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(i),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vBufferUV);var n=e(this.gl,this.shaderProgram,"aTextureCoord");this.gl.vertexAttribPointer(n,t.vBufferUV.itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(n),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t.iBuffer);for(var r=0;r<t.extraAttributes.length;r++){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.extraAttributes[r].buffer);var a=e(this.gl,this.shaderProgram,t.extraAttributes[r].name);this.gl.vertexAttribPointer(a,t.extraAttributes[r].itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a)}t.drawType===this.gl.POINTS?this.gl.drawArrays(t.drawType,0,t.vertexSize):this.gl.drawElements(t.drawType,t.iBuffer.numItems,this.gl.UNSIGNED_SHORT,0)},r.setSize=function(t,e){this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this.gl.viewportWidth=this._width,this.gl.viewportHeight=this._height,this.gl.viewport(0,0,this._width,this._height),this.aspectRatio=this._width/this._height},r.__defineGetter__("width",function(){return this._width}),r.__defineGetter__("height",function(){return this._height});var a=null;i.getInstance=function(){return null===a&&(a=new i),a},e.exports=i.getInstance()},{"gl-matrix":2}],7:[function(t,e){function i(t){void 0===t&&(t=document),this._isRotateZ=0,this.matrix=n.mat4.create(),this.m=n.mat4.create(),this._vZaxis=n.vec3.clone([0,0,0]),this._zAxis=n.vec3.clone([0,0,-1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=n.quat.clone([0,0,1,0]),this.tempRotation=n.quat.clone([0,0,0,0]),this._rotateZMargin=0,this.diffX=0,this.diffY=0,this._currDiffX=0,this._currDiffY=0,this._offset=.004,this._easing=.1,this._slerp=-1,this._isLocked=!1;var e=this;t.addEventListener("mousedown",function(t){e._onMouseDown(t)}),t.addEventListener("touchstart",function(t){e._onMouseDown(t)}),t.addEventListener("mouseup",function(t){e._onMouseUp(t)}),t.addEventListener("touchend",function(t){e._onMouseUp(t)}),t.addEventListener("mousemove",function(t){e._onMouseMove(t)}),t.addEventListener("touchmove",function(t){e._onMouseMove(t)})}var n=t("gl-matrix"),r=i.prototype;r.inverseControl=function(t){this._isInvert=void 0===t?!0:t},r.lock=function(t){this._isLocked=void 0===t?!0:t},r.getMousePos=function(t){var e,i;return void 0!==t.changedTouches?(e=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY):(e=t.clientX,i=t.clientY),{x:e,y:i}},r._onMouseDown=function(t){if(!this._isLocked&&!this._isMouseDown){var e=this.getMousePos(t),i=n.quat.clone(this._rotation);this._updateRotation(i),this._rotation=i,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0}},r._onMouseMove=function(t){this._isLocked||(t.touches&&t.preventDefault(),this.mouse=this.getMousePos(t))},r._onMouseUp=function(){this._isLocked||this._isMouseDown&&(this._isMouseDown=!1)},r.setCameraPos=function(t,e){if(e=e||this._easing,this._easing=e,!(this._slerp>0)){var i=n.quat.clone(this._rotation);this._updateRotation(i),this._rotation=n.quat.clone(i),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=n.quat.clone(t),this._slerp=1}},r.resetQuat=function(){this._rotation=n.quat.clone([0,0,1,0]),this.tempRotation=n.quat.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1},r.update=function(){n.mat4.identity(this.m),void 0===this._targetQuat?(n.quat.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<.001?(n.quat.set(this._rotation,this._targetQuat[0],this._targetQuat[1],this._targetQuat[2],this._targetQuat[3]),this._targetQuat=void 0,this._slerp=-1):(n.quat.set(this.tempRotation,0,0,0,0),n.quat.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),n.vec3.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),n.mat4.fromQuat(this.matrix,this.tempRotation)},r._updateRotation=function(t){this._isMouseDown&&!this._isLocked&&(this.diffX=-(this.mouse.x-this.preMouse.x),this.diffY=this.mouse.y-this.preMouse.y,this._isInvert&&(this.diffX=-this.diffX,this.diffY=-this.diffY)),this._currDiffX+=(this.diffX-this._currDiffX)*this._easing,this._currDiffY+=(this.diffY-this._currDiffY)*this._easing;var e,i;if(this._isRotateZ>0)1===this._isRotateZ?(e=-this._currDiffX*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,i=n.quat.clone([0,0,Math.sin(e),Math.cos(e)]),n.quat.multiply(i,t,i)):(e=-this._currDiffY*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,i=n.quat.clone([0,0,Math.sin(e),Math.cos(e)]),n.quat.multiply(i,t,i));else{var r=n.vec3.clone([this._currDiffX,this._currDiffY,0]),a=n.vec3.create();n.vec3.cross(a,r,this._zAxis),n.vec3.normalize(a,a),e=n.vec3.length(r)*this._offset,i=n.quat.clone([Math.sin(e)*a[0],Math.sin(e)*a[1],Math.sin(e)*a[2],Math.cos(e)]),n.quat.multiply(t,i,t)}},e.exports=i},{"gl-matrix":2}],8:[function(t,e){var i=t("./GLTools"),n=t("./QuatRotation"),r=t("./Camera"),a=t("./SimpleCamera"),s=t("gl-matrix"),o=function(){null!==i.canvas&&(this.gl=i.gl,this._children=[],this._init())},u=o.prototype;u._init=function(){this.camera=new a(i.canvas),this.camera.setPerspective(45*Math.PI/180,i.aspectRatio,5,3e3),this.camera.lockRotation();var t=s.vec3.clone([0,0,500]),e=s.vec3.create(),o=s.vec3.clone([0,-1,0]);this.camera.lookAt(t,e,o),this.sceneRotation=new n(i.canvas),this.rotationFront=s.mat4.create(),s.mat4.identity(this.rotationFront),this.cameraOtho=new r,this._initTextures(),this._initViews(),window.addEventListener("resize",this._onResize.bind(this))},u._initTextures=function(){},u._initViews=function(){},u.loop=function(){this.update(),this.render()},u.update=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.sceneRotation.update(),i.setViewport(0,0,i.width,i.height),i.setMatrices(this.camera),i.rotate(this.sceneRotation.matrix)},u.resize=function(){this.camera.resize&&this.camera.resize(i.aspectRatio)},u.render=function(){},u._onResize=function(){},e.exports=o},{"./Camera":3,"./GLTools":6,"./QuatRotation":7,"./SimpleCamera":10,"gl-matrix":2}],9:[function(t,e){function i(){this.FRAMERATE=60,this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,window.requestAnimFrame(this._loop.bind(this))}void 0===window.requestAnimFrame&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}());var n=i.prototype;n._loop=function(){window.requestAnimFrame(this._loop.bind(this)),this._process()},n._process=function(){var t,e,i,n=0;for(n=0;n<this._enterframeTasks.length;n++)t=this._enterframeTasks[n],null!==t&&void 0!==t&&t.func.apply(t.scope,t.params);for(;this._highTasks.length>0;)t=this._highTasks.pop(),t.func.apply(t.scope,t.params);var r=(new Date).getTime();for(n=0;n<this._delayTasks.length;n++)t=this._delayTasks[n],r-t.time>t.delay&&(t.func.apply(t.scope,t.params),this._delayTasks.splice(n,1));for(r=(new Date).getTime(),e=1e3/this.FRAMERATE;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),i=(new Date).getTime(),!(e>i-r)){this._deferTasks.unshift(t);break}t.func.apply(t.scope,t.params)}for(r=(new Date).getTime(),e=1e3/this.FRAMERATE;this._usurpTask.length>0&&(t=this._usurpTask.shift(),i=(new Date).getTime(),e>i-r);)t.func.apply(t.scope,t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[]},n.addEF=function(t,e,i){i=i||[];var n=this._idTable;return this._enterframeTasks[n]={scope:t,func:e,params:i},this._idTable++,n},n.removeEF=function(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1},n.delay=function(t,e,i,n){var r=(new Date).getTime(),a={scope:t,func:e,params:i,delay:n,time:r};this._delayTasks.push(a)},n.defer=function(t,e,i){var n={scope:t,func:e,params:i};this._deferTasks.push(n)},n.next=function(t,e,i){var n={scope:t,func:e,params:i};this._nextTasks.push(n)},n.usurp=function(t,e,i){var n={scope:t,func:e,params:i};this._usurpTask.push(n)};var r=null;i.getInstance=function(){return null===r&&(r=new i),r},e.exports=i.getInstance()},{}],10:[function(t,e){var i=t("gl-matrix"),n=t("./CameraPerspective"),r=t("./EaseNumber"),a=function(t){this._listenerTarget=t||window,n.call(this),this._isLocked=!1,this._init()},s=a.prototype=new n,o=n.prototype;s._init=function(){this.radius=new r(500),this.position[2]=this.radius.value,this.center=i.vec3.create(),this.up=i.vec3.clone([0,-1,0]),this.lookAt(this.position,this.center,this.up),this._mouse={},this._preMouse={},this._isMouseDown=!1,this._rx=new r(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new r(0),this._preRX=0,this._preRY=0,this._isLocked=!1,this._isLockRotation=!1,this._isInvert=!1,this._listenerTarget.addEventListener("mousewheel",this._onWheel.bind(this)),this._listenerTarget.addEventListener("DOMMouseScroll",this._onWheel.bind(this)),this._listenerTarget.addEventListener("mousedown",this._onMouseDown.bind(this)),this._listenerTarget.addEventListener("touchstart",this._onMouseDown.bind(this)),this._listenerTarget.addEventListener("mousemove",this._onMouseMove.bind(this)),this._listenerTarget.addEventListener("touchmove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),window.addEventListener("touchend",this._onMouseUp.bind(this))},s.inverseControl=function(t){this._isInvert=void 0===t?!0:t},s.lock=function(t){this._isLocked=void 0===t?!0:t},s.lockRotation=function(t){this._isLockRotation=void 0===t?!0:t},s._onMouseDown=function(t){this._isLockRotation||this._isLocked||(this._isMouseDown=!0,u(t,this._mouse),u(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)},s._onMouseMove=function(t){if(!this._isLockRotation&&!this._isLocked&&(u(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){var e=this._mouse.x-this._preMouse.x;this._isInvert&&(e*=-1),this._ry.value=this._preRY-.01*e;var i=this._mouse.y-this._preMouse.y;this._isInvert&&(i*=-1),this._rx.value=this._preRX-.01*i,this._rx.targetValue>.5*Math.PI&&(this._rx.targetValue=Math)}},s._onMouseUp=function(){this._isLockRotation||this._isLocked||(this._isMouseDown=!1)},s._onWheel=function(t){if(!this._isLocked){var e=t.wheelDelta,i=t.detail,n=0;n=i?e?e/i/40*i>0?1:-1:-i/3:e/120,this.radius.add(5*-n)}},s.getMatrix=function(){return this._updateCameraPosition(),this.lookAt(this.position,this.center,this.up),o.getMatrix.call(this)},s._updateCameraPosition=function(){this.position[2]=this.radius.value,this.position[1]=Math.sin(this._rx.value)*this.radius.value;var t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t};var u=function(t,e){var i=e||{};return t.touches?(i.x=t.touches[0].pageX,i.y=t.touches[0].pageY):(i.x=t.clientX,i.y=t.clientY),i};s.__defineGetter__("rx",function(){return this._rx.targetValue}),s.__defineSetter__("rx",function(t){this._rx.value=t}),s.__defineGetter__("ry",function(){return this._ry.targetValue}),s.__defineSetter__("ry",function(t){this._ry.value=t}),e.exports=a},{"./CameraPerspective":4,"./EaseNumber":5,"gl-matrix":2}]},{},[1])(1)})},l.adjoint=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},l.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},l.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=i[0],u=i[1],h=i[2],c=i[3];return t[0]=n*o+a*u,t[1]=r*o+s*u,t[2]=n*h+a*c,t[3]=r*h+s*c,t},l.mul=l.multiply,l.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u+a*o,t[1]=r*u+s*o,t[2]=n*-o+a*u,t[3]=r*-o+s*u,t},l.scale=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=i[0],u=i[1];return t[0]=n*o,t[1]=r*o,t[2]=a*u,t[3]=s*u,t},l.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},l.LDU=function(t,e,i,n){return t[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-t[2]*i[1],[t,e,i]},"undefined"!=typeof n&&(n.mat2=l);var d={};d.create=function(){var t=new a(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},d.clone=function(t){var e=new a(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},d.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},d.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},d.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=i*a-n*r;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-r*u,t[3]=i*u,t[4]=(r*o-a*s)*u,t[5]=(n*s-i*o)*u,t):null},d.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},d.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=i[0],c=i[1],f=i[2],l=i[3],d=i[4],_=i[5];return t[0]=n*h+a*c,t[1]=r*h+s*c,t[2]=n*f+a*l,t[3]=r*f+s*l,t[4]=n*d+a*_+o,t[5]=r*d+s*_+u,t},d.mul=d.multiply,d.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=Math.sin(i),c=Math.cos(i);return t[0]=n*c+a*h,t[1]=r*c+s*h,t[2]=n*-h+a*c,t[3]=r*-h+s*c,t[4]=o,t[5]=u,t},d.scale=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=i[0],c=i[1];return t[0]=n*h,t[1]=r*h,t[2]=a*c,t[3]=s*c,t[4]=o,t[5]=u,t},d.translate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=i[0],c=i[1];return t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=n*h+a*c+o,t[5]=r*h+s*c+u,t},d.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},d.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof n&&(n.mat2d=d);var _={};_.create=function(){var t=new a(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},_.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},_.clone=function(t){var e=new a(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},_.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},_.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},_.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},_.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=c*s-o*h,l=-c*a+o*u,d=h*a-s*u,_=i*f+n*l+r*d;return _?(_=1/_,t[0]=f*_,t[1]=(-c*n+r*h)*_,t[2]=(o*n-r*s)*_,t[3]=l*_,t[4]=(c*i-r*u)*_,t[5]=(-o*i+r*a)*_,t[6]=d*_,t[7]=(-h*i+n*u)*_,t[8]=(s*i-n*a)*_,t):null},_.adjoint=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8];return t[0]=s*c-o*h,t[1]=r*h-n*c,t[2]=n*o-r*s,t[3]=o*u-a*c,t[4]=i*c-r*u,t[5]=r*a-i*o,t[6]=a*h-s*u,t[7]=n*u-i*h,t[8]=i*s-n*a,t},_.determinant=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],h=t[8];return e*(h*a-s*u)+i*(-h*r+s*o)+n*(u*r-a*o)},_.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=i[0],d=i[1],_=i[2],v=i[3],m=i[4],p=i[5],g=i[6],M=i[7],w=i[8];return t[0]=l*n+d*s+_*h,t[1]=l*r+d*o+_*c,t[2]=l*a+d*u+_*f,t[3]=v*n+m*s+p*h,t[4]=v*r+m*o+p*c,t[5]=v*a+m*u+p*f,t[6]=g*n+M*s+w*h,t[7]=g*r+M*o+w*c,t[8]=g*a+M*u+w*f,t},_.mul=_.multiply,_.translate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=i[0],d=i[1];return t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=l*n+d*s+h,t[7]=l*r+d*o+c,t[8]=l*a+d*u+f,t},_.rotate=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=Math.sin(i),d=Math.cos(i);return t[0]=d*n+l*s,t[1]=d*r+l*o,t[2]=d*a+l*u,t[3]=d*s-l*n,t[4]=d*o-l*r,t[5]=d*u-l*a,t[6]=h,t[7]=c,t[8]=f,t},_.scale=function(t,e,i){var n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},_.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},_.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,u=r+r,h=i*s,c=n*s,f=n*o,l=r*s,d=r*o,_=r*u,v=a*s,m=a*o,p=a*u;return t[0]=1-f-_,t[3]=c-p,t[6]=l+m,t[1]=c+p,t[4]=1-h-_,t[7]=d-v,t[2]=l-m,t[5]=d+v,t[8]=1-h-f,t},_.normalFromMat4=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],_=e[12],v=e[13],m=e[14],p=e[15],g=i*o-n*s,M=i*u-r*s,w=i*h-a*s,x=n*u-r*o,y=n*h-a*o,b=r*h-a*u,T=c*v-f*_,L=c*m-l*_,R=c*p-d*_,A=f*m-l*v,q=f*p-d*v,E=l*p-d*m,k=g*E-M*q+w*A+x*R-y*L+b*T;return k?(k=1/k,t[0]=(o*E-u*q+h*A)*k,t[1]=(u*R-s*E-h*L)*k,t[2]=(s*q-o*R+h*T)*k,t[3]=(r*q-n*E-a*A)*k,t[4]=(i*E-r*R+a*L)*k,t[5]=(n*R-i*q-a*T)*k,t[6]=(v*b-m*y+p*x)*k,t[7]=(m*w-_*b-p*M)*k,t[8]=(_*y-v*w+p*g)*k,t):null},_.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},_.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof n&&(n.mat3=_);var v={};v.create=function(){var t=new a(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.clone=function(t){var e=new a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},v.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},v.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=r,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},v.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],_=e[12],v=e[13],m=e[14],p=e[15],g=i*o-n*s,M=i*u-r*s,w=i*h-a*s,x=n*u-r*o,y=n*h-a*o,b=r*h-a*u,T=c*v-f*_,L=c*m-l*_,R=c*p-d*_,A=f*m-l*v,q=f*p-d*v,E=l*p-d*m,k=g*E-M*q+w*A+x*R-y*L+b*T;return k?(k=1/k,t[0]=(o*E-u*q+h*A)*k,t[1]=(r*q-n*E-a*A)*k,t[2]=(v*b-m*y+p*x)*k,t[3]=(l*y-f*b-d*x)*k,t[4]=(u*R-s*E-h*L)*k,t[5]=(i*E-r*R+a*L)*k,t[6]=(m*w-_*b-p*M)*k,t[7]=(c*b-l*w+d*M)*k,t[8]=(s*q-o*R+h*T)*k,t[9]=(n*R-i*q-a*T)*k,t[10]=(_*y-v*w+p*g)*k,t[11]=(f*w-c*y-d*g)*k,t[12]=(o*L-s*A-u*T)*k,t[13]=(i*A-n*L+r*T)*k,t[14]=(v*M-_*x-m*g)*k,t[15]=(c*x-f*M+l*g)*k,t):null},v.adjoint=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],f=e[9],l=e[10],d=e[11],_=e[12],v=e[13],m=e[14],p=e[15];
return t[0]=o*(l*p-d*m)-f*(u*p-h*m)+v*(u*d-h*l),t[1]=-(n*(l*p-d*m)-f*(r*p-a*m)+v*(r*d-a*l)),t[2]=n*(u*p-h*m)-o*(r*p-a*m)+v*(r*h-a*u),t[3]=-(n*(u*d-h*l)-o*(r*d-a*l)+f*(r*h-a*u)),t[4]=-(s*(l*p-d*m)-c*(u*p-h*m)+_*(u*d-h*l)),t[5]=i*(l*p-d*m)-c*(r*p-a*m)+_*(r*d-a*l),t[6]=-(i*(u*p-h*m)-s*(r*p-a*m)+_*(r*h-a*u)),t[7]=i*(u*d-h*l)-s*(r*d-a*l)+c*(r*h-a*u),t[8]=s*(f*p-d*v)-c*(o*p-h*v)+_*(o*d-h*f),t[9]=-(i*(f*p-d*v)-c*(n*p-a*v)+_*(n*d-a*f)),t[10]=i*(o*p-h*v)-s*(n*p-a*v)+_*(n*h-a*o),t[11]=-(i*(o*d-h*f)-s*(n*d-a*f)+c*(n*h-a*o)),t[12]=-(s*(f*m-l*v)-c*(o*m-u*v)+_*(o*l-u*f)),t[13]=i*(f*m-l*v)-c*(n*m-r*v)+_*(n*l-r*f),t[14]=-(i*(o*m-u*v)-s*(n*m-r*v)+_*(n*u-r*o)),t[15]=i*(o*l-u*f)-s*(n*l-r*f)+c*(n*u-r*o),t},v.determinant=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],h=t[8],c=t[9],f=t[10],l=t[11],d=t[12],_=t[13],v=t[14],m=t[15],p=e*s-i*a,g=e*o-n*a,M=e*u-r*a,w=i*o-n*s,x=i*u-r*s,y=n*u-r*o,b=h*_-c*d,T=h*v-f*d,L=h*m-l*d,R=c*v-f*_,A=c*m-l*_,q=f*m-l*v;return p*q-g*A+M*R+w*L-x*T+y*b},v.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],d=e[10],_=e[11],v=e[12],m=e[13],p=e[14],g=e[15],M=i[0],w=i[1],x=i[2],y=i[3];return t[0]=M*n+w*o+x*f+y*v,t[1]=M*r+w*u+x*l+y*m,t[2]=M*a+w*h+x*d+y*p,t[3]=M*s+w*c+x*_+y*g,M=i[4],w=i[5],x=i[6],y=i[7],t[4]=M*n+w*o+x*f+y*v,t[5]=M*r+w*u+x*l+y*m,t[6]=M*a+w*h+x*d+y*p,t[7]=M*s+w*c+x*_+y*g,M=i[8],w=i[9],x=i[10],y=i[11],t[8]=M*n+w*o+x*f+y*v,t[9]=M*r+w*u+x*l+y*m,t[10]=M*a+w*h+x*d+y*p,t[11]=M*s+w*c+x*_+y*g,M=i[12],w=i[13],x=i[14],y=i[15],t[12]=M*n+w*o+x*f+y*v,t[13]=M*r+w*u+x*l+y*m,t[14]=M*a+w*h+x*d+y*p,t[15]=M*s+w*c+x*_+y*g,t},v.mul=v.multiply,v.translate=function(t,e,i){var n,r,a,s,o,u,h,c,f,l,d,_,v=i[0],m=i[1],p=i[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*p+e[12],t[13]=e[1]*v+e[5]*m+e[9]*p+e[13],t[14]=e[2]*v+e[6]*m+e[10]*p+e[14],t[15]=e[3]*v+e[7]*m+e[11]*p+e[15]):(n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],f=e[8],l=e[9],d=e[10],_=e[11],t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=h,t[7]=c,t[8]=f,t[9]=l,t[10]=d,t[11]=_,t[12]=n*v+o*m+f*p+e[12],t[13]=r*v+u*m+l*p+e[13],t[14]=a*v+h*m+d*p+e[14],t[15]=s*v+c*m+_*p+e[15]),t},v.scale=function(t,e,i){var n=i[0],r=i[1],a=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},v.rotate=function(t,e,i,n){var a,s,o,u,h,c,f,l,d,_,v,m,p,g,M,w,x,y,b,T,L,R,A,q,E=n[0],k=n[1],D=n[2],F=Math.sqrt(E*E+k*k+D*D);return Math.abs(F)<r?null:(F=1/F,E*=F,k*=F,D*=F,a=Math.sin(i),s=Math.cos(i),o=1-s,u=e[0],h=e[1],c=e[2],f=e[3],l=e[4],d=e[5],_=e[6],v=e[7],m=e[8],p=e[9],g=e[10],M=e[11],w=E*E*o+s,x=k*E*o+D*a,y=D*E*o-k*a,b=E*k*o-D*a,T=k*k*o+s,L=D*k*o+E*a,R=E*D*o+k*a,A=k*D*o-E*a,q=D*D*o+s,t[0]=u*w+l*x+m*y,t[1]=h*w+d*x+p*y,t[2]=c*w+_*x+g*y,t[3]=f*w+v*x+M*y,t[4]=u*b+l*T+m*L,t[5]=h*b+d*T+p*L,t[6]=c*b+_*T+g*L,t[7]=f*b+v*T+M*L,t[8]=u*R+l*A+m*q,t[9]=h*R+d*A+p*q,t[10]=c*R+_*A+g*q,t[11]=f*R+v*A+M*q,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},v.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[4],s=e[5],o=e[6],u=e[7],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+h*n,t[5]=s*r+c*n,t[6]=o*r+f*n,t[7]=u*r+l*n,t[8]=h*r-a*n,t[9]=c*r-s*n,t[10]=f*r-o*n,t[11]=l*r-u*n,t},v.rotateY=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],u=e[3],h=e[8],c=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r-h*n,t[1]=s*r-c*n,t[2]=o*r-f*n,t[3]=u*r-l*n,t[8]=a*n+h*r,t[9]=s*n+c*r,t[10]=o*n+f*r,t[11]=u*n+l*r,t},v.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],u=e[3],h=e[4],c=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+h*n,t[1]=s*r+c*n,t[2]=o*r+f*n,t[3]=u*r+l*n,t[4]=h*r-a*n,t[5]=c*r-s*n,t[6]=f*r-o*n,t[7]=l*r-u*n,t},v.fromRotationTranslation=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,u=r+r,h=a+a,c=n*o,f=n*u,l=n*h,d=r*u,_=r*h,v=a*h,m=s*o,p=s*u,g=s*h;return t[0]=1-(d+v),t[1]=f+g,t[2]=l-p,t[3]=0,t[4]=f-g,t[5]=1-(c+v),t[6]=_+m,t[7]=0,t[8]=l+p,t[9]=_-m,t[10]=1-(c+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},v.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,u=r+r,h=i*s,c=n*s,f=n*o,l=r*s,d=r*o,_=r*u,v=a*s,m=a*o,p=a*u;return t[0]=1-f-_,t[1]=c+p,t[2]=l-m,t[3]=0,t[4]=c-p,t[5]=1-h-_,t[6]=d+v,t[7]=0,t[8]=l+m,t[9]=d-v,t[10]=1-h-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.frustum=function(t,e,i,n,r,a,s){var o=1/(i-e),u=1/(r-n),h=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(r+n)*u,t[10]=(s+a)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*h,t[15]=0,t},v.perspective=function(t,e,i,n,r){var a=1/Math.tan(e/2),s=1/(n-r);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*s,t[15]=0,t},v.ortho=function(t,e,i,n,r,a,s){var o=1/(e-i),u=1/(n-r),h=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*u,t[14]=(s+a)*h,t[15]=1,t},v.lookAt=function(t,e,i,n){var a,s,o,u,h,c,f,l,d,_,m=e[0],p=e[1],g=e[2],M=n[0],w=n[1],x=n[2],y=i[0],b=i[1],T=i[2];return Math.abs(m-y)<r&&Math.abs(p-b)<r&&Math.abs(g-T)<r?v.identity(t):(f=m-y,l=p-b,d=g-T,_=1/Math.sqrt(f*f+l*l+d*d),f*=_,l*=_,d*=_,a=w*d-x*l,s=x*f-M*d,o=M*l-w*f,_=Math.sqrt(a*a+s*s+o*o),_?(_=1/_,a*=_,s*=_,o*=_):(a=0,s=0,o=0),u=l*o-d*s,h=d*a-f*o,c=f*s-l*a,_=Math.sqrt(u*u+h*h+c*c),_?(_=1/_,u*=_,h*=_,c*=_):(u=0,h=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=s,t[5]=h,t[6]=l,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(a*m+s*p+o*g),t[13]=-(u*m+h*p+c*g),t[14]=-(f*m+l*p+d*g),t[15]=1,t)},v.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},v.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof n&&(n.mat4=v);var m={};m.create=function(){var t=new a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},m.rotationTo=function(){var t=c.create(),e=c.fromValues(1,0,0),i=c.fromValues(0,1,0);return function(n,r,a){var s=c.dot(r,a);return-.999999>s?(c.cross(t,e,r),c.length(t)<1e-6&&c.cross(t,i,r),c.normalize(t,t),m.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(c.cross(t,r,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,m.normalize(n,n))}}(),m.setAxes=function(){var t=_.create();return function(e,i,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],m.normalize(e,m.fromMat3(e,t))}}(),m.clone=f.clone,m.fromValues=f.fromValues,m.copy=f.copy,m.set=f.set,m.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},m.setAxisAngle=function(t,e,i){i=.5*i;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t},m.add=f.add,m.multiply=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=i[0],u=i[1],h=i[2],c=i[3];return t[0]=n*c+s*o+r*h-a*u,t[1]=r*c+s*u+a*o-n*h,t[2]=a*c+s*h+n*u-r*o,t[3]=s*c-n*o-r*u-a*h,t},m.mul=m.multiply,m.scale=f.scale,m.rotateX=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u+s*o,t[1]=r*u+a*o,t[2]=a*u-r*o,t[3]=s*u-n*o,t},m.rotateY=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u-a*o,t[1]=r*u+s*o,t[2]=a*u+n*o,t[3]=s*u-r*o,t},m.rotateZ=function(t,e,i){i*=.5;var n=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(i),u=Math.cos(i);return t[0]=n*u+r*o,t[1]=r*u-n*o,t[2]=a*u+s*o,t[3]=s*u-a*o,t},m.calculateW=function(t,e){var i=e[0],n=e[1],r=e[2];return t[0]=i,t[1]=n,t[2]=r,t[3]=-Math.sqrt(Math.abs(1-i*i-n*n-r*r)),t},m.dot=f.dot,m.lerp=f.lerp,m.slerp=function(t,e,i,n){var r,a,s,o,u,h=e[0],c=e[1],f=e[2],l=e[3],d=i[0],_=i[1],v=i[2],m=i[3];return a=h*d+c*_+f*v+l*m,0>a&&(a=-a,d=-d,_=-_,v=-v,m=-m),1-a>1e-6?(r=Math.acos(a),s=Math.sin(r),o=Math.sin((1-n)*r)/s,u=Math.sin(n*r)/s):(o=1-n,u=n),t[0]=o*h+u*d,t[1]=o*c+u*_,t[2]=o*f+u*v,t[3]=o*l+u*m,t},m.invert=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*i+n*n+r*r+a*a,o=s?1/s:0;return t[0]=-i*o,t[1]=-n*o,t[2]=-r*o,t[3]=a*o,t},m.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},m.length=f.length,m.len=m.length,m.squaredLength=f.squaredLength,m.sqrLen=m.squaredLength,m.normalize=f.normalize,m.fromMat3=function(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[7]-e[5])*i,t[1]=(e[2]-e[6])*i,t[2]=(e[3]-e[1])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var a=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*a+a]-e[3*s+s]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*s+a]-e[3*a+s])*i,t[a]=(e[3*a+r]+e[3*r+a])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t},m.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof n&&(n.quat=m)}(a.exports)}(this)},{}],3:[function(t,e){"use strict";var i=t("gl-matrix"),n=function(){this.matrix=i.mat4.create(),i.mat4.identity(this.matrix),this.position=i.vec3.create()},r=n.prototype;r.lookAt=function(t,e,n){i.vec3.copy(this.position,t),i.mat4.identity(this.matrix),i.mat4.lookAt(this.matrix,t,e,n)},r.getMatrix=function(){return this.matrix},e.exports=n},{"gl-matrix":2}],4:[function(t,e){"use strict";var i=t("./Camera"),n=t("gl-matrix"),r=function(){i.call(this),this.projection=n.mat4.create(),this.mtxFinal=n.mat4.create()},a=r.prototype=new i;a.setPerspective=function(t,e,i,r){this._fov=t,this._near=i,this._far=r,this._aspect=e,n.mat4.perspective(this.projection,t,e,i,r)},a.getMatrix=function(){return this.matrix},a.resize=function(t){this._aspect=t,n.mat4.perspective(this.projection,this._fov,t,this._near,this._far)},a.__defineGetter__("near",function(){return this._near}),a.__defineGetter__("far",function(){return this._far}),e.exports=r},{"./Camera":3,"gl-matrix":2}],5:[function(t,e){"use strict";function i(t,e){this._easing=e||.1,this._value=t,this._targetValue=t,n.addEF(this,this._update)}var n=t("./Scheduler"),r=i.prototype;r._update=function(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this._easing},r.setTo=function(t){this._targetValue=this._value=t},r.add=function(t){this._targetValue+=t},r.limit=function(t,e){this._min=t,this._max=e,this._checkLimit()},r._checkLimit=function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)},r.__defineGetter__("value",function(){return this._value}),r.__defineGetter__("targetValue",function(){return this._targetValue}),r.__defineSetter__("value",function(t){this._targetValue=t}),e.exports=i},{"./Scheduler":9}],6:[function(t,e){"use strict";function i(){this.aspectRatio=1,this.fieldOfView=45,this.zNear=5,this.zFar=3e3,this.canvas=null,this.gl=null,this.shader=null,this.shaderProgram=null}var n=t("gl-matrix"),r=i.prototype;r.init=function(t,e,i,r){this.canvas=t||document.createElement("canvas");var a=r||{};a.antialias=!0,this.gl=this.canvas.getContext("experimental-webgl",a),console.log("INIT GL TOOLS : ",this.gl),void 0!==e&&void 0!==i?this.setSize(e,i):this.setSize(window.innerWidth,window.innerHeight),this.gl.viewport(0,0,this.gl.viewportWidth,this.gl.viewportHeight),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),this.matrix=n.mat4.create(),n.mat4.identity(this.matrix),this.normalMatrix=n.mat3.create(),this.depthTextureExt=this.gl.getExtension("WEBKIT_WEBGL_depth_texture"),this.floatTextureExt=this.gl.getExtension("OES_texture_float"),this.floatTextureLinearExt=this.gl.getExtension("OES_texture_float_linear")},r.getGL=function(){return this.gl},r.setShader=function(t){this.shader=t},r.setShaderProgram=function(t){this.shaderProgram=t},r.setViewport=function(t,e,i,n){this.gl.viewport(t,e,i,n)},r.setMatrices=function(t){this.camera=t},r.rotate=function(t){n.mat4.copy(this.matrix,t),n.mat4.multiply(this.matrix,this.camera.getMatrix(),this.matrix),n.mat3.fromMat4(this.normalMatrix,this.matrix),n.mat3.invert(this.normalMatrix,this.normalMatrix),n.mat3.transpose(this.normalMatrix,this.normalMatrix)},r.enableAlphaBlending=function(){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)},r.enableAdditiveBlending=function(){this.gl.blendFunc(this.gl.ONE,this.gl.ONE)},r.clear=function(t,e,i,n){this.gl.clearColor(t,e,i,n),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},r.draw=function(t){function e(t,e,i){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[i]&&(e.cacheAttribLoc[i]=t.getAttribLocation(e,i)),e.cacheAttribLoc[i]}if(!this.shaderProgram)return void console.warn("Shader program not ready yet");this.gl.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.camera.projection||this.camera.getMatrix()),this.gl.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.matrix),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vBufferPos);var i=e(this.gl,this.shaderProgram,"aVertexPosition");this.gl.vertexAttribPointer(i,t.vBufferPos.itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(i),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vBufferUV);var n=e(this.gl,this.shaderProgram,"aTextureCoord");this.gl.vertexAttribPointer(n,t.vBufferUV.itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(n),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t.iBuffer);for(var r=0;r<t.extraAttributes.length;r++){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.extraAttributes[r].buffer);var a=e(this.gl,this.shaderProgram,t.extraAttributes[r].name);this.gl.vertexAttribPointer(a,t.extraAttributes[r].itemSize,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a)}t.drawType===this.gl.POINTS?this.gl.drawArrays(t.drawType,0,t.vertexSize):this.gl.drawElements(t.drawType,t.iBuffer.numItems,this.gl.UNSIGNED_SHORT,0)},r.setSize=function(t,e){this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this.gl.viewportWidth=this._width,this.gl.viewportHeight=this._height,this.gl.viewport(0,0,this._width,this._height),this.aspectRatio=this._width/this._height},r.__defineGetter__("width",function(){return this._width}),r.__defineGetter__("height",function(){return this._height});var a=null;i.getInstance=function(){return null===a&&(a=new i),a},e.exports=i.getInstance()},{"gl-matrix":2}],7:[function(t,e){"use strict";function i(t){void 0===t&&(t=document),this._isRotateZ=0,this.matrix=n.mat4.create(),this.m=n.mat4.create(),this._vZaxis=n.vec3.clone([0,0,0]),this._zAxis=n.vec3.clone([0,0,-1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=n.quat.clone([0,0,1,0]),this.tempRotation=n.quat.clone([0,0,0,0]),this._rotateZMargin=0,this.diffX=0,this.diffY=0,this._currDiffX=0,this._currDiffY=0,this._offset=.004,this._easing=.1,this._slerp=-1,this._isLocked=!1;var e=this;t.addEventListener("mousedown",function(t){e._onMouseDown(t)}),t.addEventListener("touchstart",function(t){e._onMouseDown(t)}),t.addEventListener("mouseup",function(t){e._onMouseUp(t)}),t.addEventListener("touchend",function(t){e._onMouseUp(t)}),t.addEventListener("mousemove",function(t){e._onMouseMove(t)}),t.addEventListener("touchmove",function(t){e._onMouseMove(t)})}var n=t("gl-matrix"),r=i.prototype;r.inverseControl=function(t){this._isInvert=void 0===t?!0:t},r.lock=function(t){this._isLocked=void 0===t?!0:t},r.getMousePos=function(t){var e,i;return void 0!==t.changedTouches?(e=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY):(e=t.clientX,i=t.clientY),{x:e,y:i}},r._onMouseDown=function(t){if(!this._isLocked&&!this._isMouseDown){var e=this.getMousePos(t),i=n.quat.clone(this._rotation);this._updateRotation(i),this._rotation=i,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0}},r._onMouseMove=function(t){this._isLocked||(t.touches&&t.preventDefault(),this.mouse=this.getMousePos(t))},r._onMouseUp=function(){this._isLocked||this._isMouseDown&&(this._isMouseDown=!1)},r.setCameraPos=function(t,e){if(e=e||this._easing,this._easing=e,!(this._slerp>0)){var i=n.quat.clone(this._rotation);this._updateRotation(i),this._rotation=n.quat.clone(i),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=n.quat.clone(t),this._slerp=1}},r.resetQuat=function(){this._rotation=n.quat.clone([0,0,1,0]),this.tempRotation=n.quat.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1},r.update=function(){n.mat4.identity(this.m),void 0===this._targetQuat?(n.quat.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<.001?(n.quat.set(this._rotation,this._targetQuat[0],this._targetQuat[1],this._targetQuat[2],this._targetQuat[3]),this._targetQuat=void 0,this._slerp=-1):(n.quat.set(this.tempRotation,0,0,0,0),n.quat.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),n.vec3.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),n.mat4.fromQuat(this.matrix,this.tempRotation)},r._updateRotation=function(t){this._isMouseDown&&!this._isLocked&&(this.diffX=-(this.mouse.x-this.preMouse.x),this.diffY=this.mouse.y-this.preMouse.y,this._isInvert&&(this.diffX=-this.diffX,this.diffY=-this.diffY)),this._currDiffX+=(this.diffX-this._currDiffX)*this._easing,this._currDiffY+=(this.diffY-this._currDiffY)*this._easing;var e,i;if(this._isRotateZ>0)1===this._isRotateZ?(e=-this._currDiffX*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,i=n.quat.clone([0,0,Math.sin(e),Math.cos(e)]),n.quat.multiply(i,t,i)):(e=-this._currDiffY*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,i=n.quat.clone([0,0,Math.sin(e),Math.cos(e)]),n.quat.multiply(i,t,i));else{var r=n.vec3.clone([this._currDiffX,this._currDiffY,0]),a=n.vec3.create();n.vec3.cross(a,r,this._zAxis),n.vec3.normalize(a,a),e=n.vec3.length(r)*this._offset,i=n.quat.clone([Math.sin(e)*a[0],Math.sin(e)*a[1],Math.sin(e)*a[2],Math.cos(e)]),n.quat.multiply(t,i,t)}},e.exports=i},{"gl-matrix":2}],8:[function(t,e){"use strict";var i=t("./GLTools"),n=t("./QuatRotation"),r=t("./Camera"),a=t("./SimpleCamera"),s=t("gl-matrix"),o=function(){null!==i.canvas&&(this.gl=i.gl,this._children=[],this._init())},u=o.prototype;u._init=function(){this.camera=new a(i.canvas),this.camera.setPerspective(45*Math.PI/180,i.aspectRatio,5,3e3),this.camera.lockRotation();var t=s.vec3.clone([0,0,500]),e=s.vec3.create(),o=s.vec3.clone([0,-1,0]);this.camera.lookAt(t,e,o),this.sceneRotation=new n(i.canvas),this.rotationFront=s.mat4.create(),s.mat4.identity(this.rotationFront),this.cameraOtho=new r,this._initTextures(),this._initViews(),window.addEventListener("resize",this._onResize.bind(this))},u._initTextures=function(){},u._initViews=function(){},u.loop=function(){this.update(),this.render()},u.update=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.sceneRotation.update(),i.setViewport(0,0,i.width,i.height),i.setMatrices(this.camera),i.rotate(this.sceneRotation.matrix)},u.resize=function(){this.camera.resize&&this.camera.resize(i.aspectRatio)},u.render=function(){},u._onResize=function(){},e.exports=o},{"./Camera":3,"./GLTools":6,"./QuatRotation":7,"./SimpleCamera":10,"gl-matrix":2}],9:[function(t,e){"use strict";function i(){this.FRAMERATE=60,this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,window.requestAnimFrame(this._loop.bind(this))}void 0===window.requestAnimFrame&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}());var n=i.prototype;n._loop=function(){window.requestAnimFrame(this._loop.bind(this)),this._process()},n._process=function(){var t,e,i,n=0;for(n=0;n<this._enterframeTasks.length;n++)t=this._enterframeTasks[n],null!==t&&void 0!==t&&t.func.apply(t.scope,t.params);for(;this._highTasks.length>0;)t=this._highTasks.pop(),t.func.apply(t.scope,t.params);var r=(new Date).getTime();for(n=0;n<this._delayTasks.length;n++)t=this._delayTasks[n],r-t.time>t.delay&&(t.func.apply(t.scope,t.params),this._delayTasks.splice(n,1));for(r=(new Date).getTime(),e=1e3/this.FRAMERATE;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),i=(new Date).getTime(),!(e>i-r)){this._deferTasks.unshift(t);break}t.func.apply(t.scope,t.params)}for(r=(new Date).getTime(),e=1e3/this.FRAMERATE;this._usurpTask.length>0&&(t=this._usurpTask.shift(),i=(new Date).getTime(),e>i-r);)t.func.apply(t.scope,t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[]},n.addEF=function(t,e,i){i=i||[];var n=this._idTable;return this._enterframeTasks[n]={scope:t,func:e,params:i},this._idTable++,n},n.removeEF=function(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1},n.delay=function(t,e,i,n){var r=(new Date).getTime(),a={scope:t,func:e,params:i,delay:n,time:r};this._delayTasks.push(a)},n.defer=function(t,e,i){var n={scope:t,func:e,params:i};this._deferTasks.push(n)},n.next=function(t,e,i){var n={scope:t,func:e,params:i};this._nextTasks.push(n)},n.usurp=function(t,e,i){var n={scope:t,func:e,params:i};this._usurpTask.push(n)};var r=null;i.getInstance=function(){return null===r&&(r=new i),r},e.exports=i.getInstance()},{}],10:[function(t,e){"use strict";var i=t("gl-matrix"),n=t("./CameraPerspective"),r=t("./EaseNumber"),a=function(t){this._listenerTarget=t||window,n.call(this),this._isLocked=!1,this._init()},s=a.prototype=new n,o=n.prototype;s._init=function(){this.radius=new r(500),this.position[2]=this.radius.value,this.center=i.vec3.create(),this.up=i.vec3.clone([0,-1,0]),this.lookAt(this.position,this.center,this.up),this._mouse={},this._preMouse={},this._isMouseDown=!1,this._rx=new r(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new r(0),this._preRX=0,this._preRY=0,this._isLocked=!1,this._isLockRotation=!1,this._isInvert=!1,this._listenerTarget.addEventListener("mousewheel",this._onWheel.bind(this)),this._listenerTarget.addEventListener("DOMMouseScroll",this._onWheel.bind(this)),this._listenerTarget.addEventListener("mousedown",this._onMouseDown.bind(this)),this._listenerTarget.addEventListener("touchstart",this._onMouseDown.bind(this)),this._listenerTarget.addEventListener("mousemove",this._onMouseMove.bind(this)),this._listenerTarget.addEventListener("touchmove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),window.addEventListener("touchend",this._onMouseUp.bind(this))},s.inverseControl=function(t){this._isInvert=void 0===t?!0:t},s.lock=function(t){this._isLocked=void 0===t?!0:t},s.lockRotation=function(t){this._isLockRotation=void 0===t?!0:t},s._onMouseDown=function(t){this._isLockRotation||this._isLocked||(this._isMouseDown=!0,u(t,this._mouse),u(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)},s._onMouseMove=function(t){if(!this._isLockRotation&&!this._isLocked&&(u(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){var e=this._mouse.x-this._preMouse.x;this._isInvert&&(e*=-1),this._ry.value=this._preRY-.01*e;var i=this._mouse.y-this._preMouse.y;this._isInvert&&(i*=-1),this._rx.value=this._preRX-.01*i,this._rx.targetValue>.5*Math.PI&&(this._rx.targetValue=Math)}},s._onMouseUp=function(){this._isLockRotation||this._isLocked||(this._isMouseDown=!1)},s._onWheel=function(t){if(!this._isLocked){var e=t.wheelDelta,i=t.detail,n=0;n=i?e?e/i/40*i>0?1:-1:-i/3:e/120,this.radius.add(5*-n)}},s.getMatrix=function(){return this._updateCameraPosition(),this.lookAt(this.position,this.center,this.up),o.getMatrix.call(this)},s._updateCameraPosition=function(){this.position[2]=this.radius.value,this.position[1]=Math.sin(this._rx.value)*this.radius.value;var t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t};var u=function(t,e){var i=e||{};return t.touches?(i.x=t.touches[0].pageX,i.y=t.touches[0].pageY):(i.x=t.clientX,i.y=t.clientY),i};s.__defineGetter__("rx",function(){return this._rx.targetValue}),s.__defineSetter__("rx",function(t){this._rx.value=t}),s.__defineGetter__("ry",function(){return this._ry.targetValue}),s.__defineSetter__("ry",function(t){this._ry.value=t}),e.exports=a},{"./CameraPerspective":4,"./EaseNumber":5,"gl-matrix":2}]},{},[1])(1)});